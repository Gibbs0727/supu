"use strict";$(function(){var e=$("#regloglist li").eq(0).outerWidth();$("#regloglist li").css("left",e),$("#regloglist li").eq(0).css("left",0);var t=0;function n(){$("#regloglist li").eq(t).animate({left:e},500),t=--t<0?$("#regloglist li").size()-1:t,$("#regloglist li").eq(t).css("left",-e),$("#regloglist li").eq(t).animate({left:0},500)}$("#login").click(function(){n(),$("#biaoti").html("欢迎登录")}),$("#reg").click(function(){n(),$("#biaoti").html("欢迎注册")});document.getElementById("box");var o=document.getElementById("gun"),l=document.getElementById("color");o.onmousedown=function(e){var n=(e=e||window.event).clientX-o.offsetLeft;document.onmousemove=function(e){var t=(e=e||window.event).clientX-n;247<=t&&(t=247,o.innerHTML="√",o.style.color="#A6E69A",l.innerHTML="验证通过",document.onmousemove=null),t<=0&&(t=0),o.style.left=t+"px",l.style.width=o.offsetLeft+"px"},document.onmouseup=function(){o.offsetLeft<247&&(o.style.left="0px",l.style.width=o.offsetLeft+"px"),document.onmousemove=null}};var r=document.getElementById("yanzhengma"),i="1234567890ABCDEF",a="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm";r.onclick=function(){var e=function(){for(var e="#",t=0;t<6;t++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}();r.style.backgroundColor=e;var t=function(e){for(var t="",n=0;n<4;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}();r.innerHTML=t};var c=document.querySelector("#regmes"),u=document.querySelector("#regpsw"),m=document.querySelector("#regname"),s=document.querySelector("#yanzheng"),f=document.querySelector("#regBtn");m.onblur=function(){var e=m.value.trim();if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)||/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/.test(e)){var t="username="+e+"&time="+new Date;ajax("GET","../api/checkname.php",t,function(e){console.log(e),c.style.color="1"==e?(c.innerHTML="该用户名可注册","green"):(c.innerHTML="该用户名已被注册","red")})}else c.innerHTML="请输入正确的电话号码或邮箱",c.style.color="red"},f.onclick=function(){var e=m.value.trim(),t=u.value.trim(),n=s.value.trim(),o=r.innerHTML;if(e&&t)if(n==o){var l="username="+e+"&password="+t+"&time="+new Date;ajax("POST","../api/register.php",l,function(e){"yes"==e?alert("注册成功"):alert("注册失败"),m.value="",u.value="",s.value="",c.innerHTML=""})}else c.innerHTML="您输入的验证码有误";else c.innerHTML="请输入用户用户信息和密码"};document.querySelector("#logmes");var g=document.querySelector("#logpsw"),d=document.querySelector("#logname");document.querySelector("#logBtn").onclick=function(){var t=d.value.trim(),e=g.value.trim(),n="username="+t+"&password="+e+"&time="+new Date;t&&e&&ajax("POST","../api/login.php",n,function(e){console.log(e),"yes"==e?(Cookie.set("username",t,{path:"/"}),location.href="../main.html"):alert("用户名或密码有误")})}});