"use strict";$(document).ready(function(){var e=document.querySelector("#priceDown"),n=document.querySelector("#mainTworc"),s=document.querySelector("#page"),i=document.querySelector("#prevpage"),c=document.querySelector("#nextpage"),p=0;function o(e){var a=e.datalist.map(function(e){var a=e.bigimg.split("-")[0];return'<div class="mainTwors" data-id="'+e.gid+'">\n                                    <img class="mainTworsimg" src="'+a+'" alt="" />\n                                    <p>\n                                        <span>满99立减20/</span>\n                                        <span>'+e.goodname+"</span>\n                                    </p>\n                                    <p>\n                                        <span>￥"+e.price+"</span>\n                                        <span><del>￥"+e.delprice+'</del></span>\n                                        <span>满额立减</span>\n                                    </p>\n                                    <div class="mainNum">\n                                        <span>\n                                            <input type="text" value="1" />\n                                            <a href="javascript:;">+</a>\n                                            <a href="javascript:;">-</a>\n                                        </span>\n                                        <span>加入购物车</span>\n                                        <span>收藏</span>\n                                    </div>   \n                                </div>'}).join("");n.innerHTML=a}e.onclick=function(){var r=new XMLHttpRequest;r.open("GET","../api/priceSort.php?page=1&qty=24&time=new Date()",!0),r.send(),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=r.responseText,a=JSON.parse(e);o(a);var n=Math.ceil(a.total/a.qty);p=n;for(var t=0;t<n;t++)s.innerHTML+='<a href="javascript:;">'+(t+1)+"</a>";2<=n&&(i.style.display="block",c.style.display="block")}}};var t=1;s.onclick=function(e){if("a"==(e=e||window.event).target.tagName.toLowerCase()){var a="../api/01goodlist.php?page="+(t=1*e.target.innerText)+"&qty=24&time=new Date()";xhr.open("GET",a,!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=xhr.responseText;o(JSON.parse(e));for(var a=0;a<s.children.length;a++)s.children[a].className="";s.children[t-1].className="active"}}}},i.onclick=function(){--t<=1&&(t=1);var e="../api/01goodlist.php?page="+t+"&qty=24&time=new Date()";xhr.open("GET",e,!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=xhr.responseText;o(JSON.parse(e));for(var a=0;a<s.children.length;a++)s.children[a].className="";s.children[t-1].className="active"}}},c.onclick=function(){p<=++t&&(t=p);var e="../api/01goodlist.php?page="+t+"&qty=24&time=new Date()";xhr.open("GET",e,!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=xhr.responseText;o(JSON.parse(e));for(var a=0;a<s.children.length;a++)s.children[a].className="";s.children[t-1].className="active"}}}});